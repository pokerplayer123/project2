<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Tutorial Helper</title>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<template name="layout">
  {{ >nav }}

  <div class="container">
    {{#if currentUser}}
    <!-- -->
    {{> yield }}
    <!-- -->
    {{else}}
    <!-- -->
    {{> atForm}}
    <!-- -->
    {{/if}}
  </div>

  <script>
    $(document).ready(function () {
      $(".button-collapse").sideNav();
      $(".dropdown-button").dropdown();
      // $('.modal').modal();
    });
  </script>
</template>

<template name="nav">

  <nav class="amber nav-extended">
    <div class="nav-wrapper">
      <a href="/" class="brand-logo">&nbsp;&nbsp;Tutorial Helper&nbsp;&nbsp;</a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        {{#if currentUser}}
        <li><a href="/">Tutorials</a></li>
        <li><a href="/editProfile">Edit Profile</a></li>
        {{/if}}
        <li>
          {{> atNavButton}}
        </li>
      </ul>
      <ul class="side-nav" id="mobile-demo">
        {{#if currentUser}}
        <li><a href="/">Tutorials</a></li>
        <li><a href="/editProfile">Edit Profile</a></li>
        {{/if}}
        <li>
          {{> atNavButton}}
        </li>
      </ul>
    </div>
  </nav>

</template>

<template name="search">
  <div class="input-field">
    <i class="material-icons prefix">search</i>
    <!-- input -->
    {{> EasySearch.Input index=tutorialsIndex attributes=searchInputAttr }}
    <label for="search">Search</label>

  </div>

  <div class="row">
    {{#EasySearch.Each index=tutorialsIndex}} {{> tutorial }} {{/EasySearch.Each}}
  </div>

  {{> EasySearch.LoadMore index=tutorialsIndex}}

  <!-- -->
  {{#EasySearch.IfNoResults index=tutorialsIndex}}
  <div class="card blue-grey darken-1">
    <div class="card-content white-text">
      <p>No results found!</p>
    </div>
  </div>
  {{/EasySearch.IfNoResults}}
</template>

<template name="tutorials">
  <h4>Tutorials</h4>
  <br>

  <!-- Search ocntains the actual data now-->
  {{> search }}
  <!-- finish search-->

  {{#if isTutor}}
  <div class="col s12 m6 right">
    <a class="btn-floating btn-large waves-effect waves-light align-right modal-trigger" href="/tutorials/add">
      <i class="material-icons">add</i
    ></a>
  </div>
  {{/if}}
</template>

<template name="tutorial">
  <div class="col s12 m6 l4">
    <div class="card sticky-action">
      <div class="card-image">
        <img src="/img/unsw-logo-large.jpg">
      </div>
      <div class="card-content">
        <span class="card-title activator grey-text text-darken-4">{{tutorialName}}<i class="material-icons right">more_vert</i></span>
      </div>
      <div class="card-reveal">
        <span class="card-title grey-text text-darken-4">{{tutorialName}}<i class="material-icons right">close</i></span>
        <dl class="row">
          <dt class="col s4"><b>Course:</b></dt>
          <dd class="col s8">{{courseName}}</dd>
        </dl>
        <dl class="row">
          <dt class="col s4"><b>Start:</b></dt>
          <dd class="col s8">{{startDate}} {{startTime}}</dd>
        </dl>
        <dl class="row">
          <dt class="col s4"><b>End:</b></dt>
          <dd class="col s8">{{endDate}} {{endTime}}</dd>
        </dl>
      </div>
      <div class="card-action">
        <a class="waves-effect waves-light btn">Join</a>
        <a class="btn" href="/tutorials/{{_id}}">Detail</a> {{#if isOwner}}
        <a class="delete-tutorial btn red"><i class="material-icons">delete</i></a> {{/if}}
      </div>
    </div>
  </div>

</template>

<template name="addTutorial">
  <!--Modal Structure -->
  <div id="addModal" class="">
    <div class="modal-content">
      <h4>Create Tutorial</h4>
      <form class="add-form">
        <input type="text" name="tutorialName" placeholder="Tutorial name...">
        <input type="text" name="courseName" placeholder="Course name...">
        <input type="text" name="password" placeholder="Room password...">
        <input type="date" name="startDate" placeholder="Set the start date...">
        <input type="date" name="endDate" placeholder="Set the end date...">
        <input type="time" name="startTime" placeholder="Start time...">
        <input type="time" name="endTime" placeholder="End time...">
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </form>
    </div>
  </div>
</template>

<template name="tutorialDetail">
  <br>
  <div class="row">
    <div class="col s12 m5 l4">
      <div class="card">
        <div class="card-image">
          <img src="/img/unsw-logo-large.jpg">
          <span class="card-title">{{tutorialName}}</span>
        </div>
        <div class="card-content">
          <dl class="row">
            <dt class="col s4"><b>Tutorial:</b></dt>
            <dd class="col s8">{{tutorialName}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>Course:</b></dt>
            <dd class="col s8">{{courseName}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>Start:</b></dt>
            <dd class="col s8">{{startDate}} {{startTime}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>End:</b></dt>
            <dd class="col s8">{{endDate}} {{endTime}}</dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="col s12 m7 l8">


      <h4>Request List</h4>
      <div class="right-align">
        <a class="btn waves-effect waves-light btn modal-trigger" id="create-request" href="#create-request-modal">New Request</a>
      </div>

      <br> {{#if hasRequests}}
      <ul class="collapsible" data-collapsible="expandable">
        {{#each requests}} {{> requestItem}} {{/each}}
      </ul>
      {{else}}
      <p>There is no requests yet.</p>
      {{/if}}

    </div>
  </div>

  <div id="create-request-modal" class="modal">
    <form id="create-request-form">
      <div class="modal-content">
        <h4>Create New Request</h4>
        <div class="row">
          <div class="input-field col s12">
            <input id="question" name="question" type="text" required>
            <label for="question">Question</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <textarea id="desc" name="desc" class="materialize-textarea" required></textarea>
            <label for="desc">Issue Description</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
        <button type="submit" id="submit-request" class="modal-action waves-effect waves-green btn-flat">Submit</button>
      </div>
    </form>
  </div>

  <script>
    $('.collapsible').collapsible();
  </script>
</template>

<template name="requestItem">
  <li style="position: relative">
    {{#if isRequestOwner }}
    <a class="btn-floating red delete-request"> <i class="material-icons">close</i></a>
    <!-- -->
    {{/if}}
    <div class="collapsible-header">
      <i class="material-icons">question_answer</i>
      <span><b>{{question}}</b></span>
      <span style="flex-grow: 1;"></span>
      <span>{{ownerZid}}</span>
      <span class="date-label">{{fromNow}}</span>
    </div>
    <div class="collapsible-body" style="padding: 0.5rem 1rem">
      <p>
        <b>Owner zID:</b> {{ownerZid}}
      </p>
      <p>
        <b>Description:</b>
        <br> {{desc}}
      </p>
    </div>
  </li>
</template>

<template name="editProfile">
  <!--Modal Structure -->
  <div id="editProfile" class="">
    <div class="modal-content">
      <h4>Edit Profile</h4>
      <form class="edit-profile-form">
        <label>zID</label>
        <input type="text" name="zid" value="{{userProfile.zid}}" placeholder="zId">
        <label>Firstname</label>
        <input type="text" name="firstname" value="{{userProfile.firstname}}" placeholder="firstname">
        <label>Lastname</label>
        <input type="text" name="lastname" value="{{userProfile.lastname}}" placeholder="lastname">
        <label>Degree</label>
        <input type="text" name="degree" value="{{userProfile.degree}}" placeholder="degree">
        <label>Gender</label>
        <select name="gender" style="display: block">
          <option value="male" {{compareGender 'male'}}>Male</option>
          <option value="female" {{compareGender 'female'}}>Female</option>
        </select>
        <!--  -->
        {{#if isTutor}}
        <!--  -->
        <label>Consultation Start Time</label>
        <input type="time" name="consultationStart" value="{{userProfile.consultationStart}}" placeholder="Consultation Start Time">
        <label>Consultation End Time</label>
        <input type="time" name="consultationEnd" value="{{userProfile.consultationEnd}}" placeholder="Consultation End Time">
        <!--  -->
        {{/if}}
        <!--  -->
        <br>
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </form>
    </div>
  </div>
<<<<<<< HEAD
</template>
=======
</template>

<template name="joinTutorial">
  <!-- Modal Content -->
  <div id="passwordForm" class="modal">
    <div class="modal-content">
      <form class="join-class-by-password">
      <label>Insert class password:</label>
      <input type="text" id="classPassword" placeholder="Insert the password ....">
      </form>
     
    </div>
  </div>
</template>

<template name="passwordForm">
    <!--Modal Structure -->
    <div class="row">
        <div class="input-field col s12">
          <input id="inputPassword" type="password" class="validate">
          <label for="password">Password</label>
        </div>
      </div>
      <a class="btn" id="joinPassowrd">join</a>
</template>
>>>>>>> parent of a978d48... +-=
