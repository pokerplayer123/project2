<head>
  <title>Tutorial Helper</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<template name="layout">
  {{ >nav }}

  <div class="container">
    {{#if currentUser}}
    <!-- -->
    {{> yield }}
    <!-- -->
    {{else}}
    <!-- -->
    {{> atForm}}
    <!-- -->
    {{/if}}
  </div>

  <script>
    $(document).ready(function () {
      $(".button-collapse").sideNav();
      $(".dropdown-button").dropdown();
      $('.modal').modal();
    });
  </script>
</template>

<template name="nav">

  <nav class="amber nav-extended">
    <div class="nav-wrapper">
      <a href="#" class="brand-logo">&nbsp;&nbsp;Tutorial Helper&nbsp;&nbsp;</a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        {{#if currentUser}}
        <li><a href="/">Tutorials</a></li>
        <li><a href="/editProfile">Edit Profile</a></li>
        {{/if}}
        <li>
          {{> atNavButton}}
        </li>
      </ul>
      <ul class="side-nav" id="mobile-demo">
        {{#if currentUser}}
        <li><a href="/">Tutorials</a></li>
        <li><a href="/editProfile">Edit Profile</a></li>
        {{/if}}
        <li>
          {{> atNavButton}}
        </li>
      </ul>
    </div>
  </nav>

</template>

<template name="tutorials">
  <h4>Tutorials</h4>

  {{#if isTutor}}
  <div class="right-align">
    <a class="waves-effect waves-light btn modal-trigger" href="#addModal">Add Tutorial</a>
  </div>
  {{/if}}

  <div class="row">
    {{#each tutorials}} {{> tutorial }} {{/each}}
  </div>

  <!-- modals -->
  {{> addTutorial}}
</template>

<template name="tutorial">
  <div class="col s12 m6 l4">
    <div class="card sticky-action">
      <div class="card-image">
        <img src="/img/unsw-logo-large.jpg">
      </div>
      <div class="card-content">
        <span class="card-title activator grey-text text-darken-4">{{tutorialName}}<i class="material-icons right">more_vert</i></span>
      </div>
      <div class="card-reveal">
        <span class="card-title grey-text text-darken-4">{{tutorialName}}<i class="material-icons right">close</i></span>
        <dl class="row">
          <dt class="col s4"><b>Course:</b></dt>
          <dd class="col s8">{{courseName}}</dd>
        </dl>
        <dl class="row">
          <dt class="col s4"><b>Start:</b></dt>
          <dd class="col s8">{{startDate}} {{startTime}}</dd>
        </dl>
        <dl class="row">
          <dt class="col s4"><b>End:</b></dt>
          <dd class="col s8">{{endDate}} {{endTime}}</dd>
        </dl>
      </div>
      <div class="card-action">
        <a class="btn" href="/tutorials/{{_id}}">Detail</a>
        {{#if isOwner}}
        <a class="delete-tutorial btn red"><i class="material-icons">delete</i></a>
        {{/if}}
      </div>
    </div>
  </div>

</template>

<template name="addTutorial">
  <!--Modal Structure -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <h4>Add Tutorial</h4>
      <form class="add-form">
        <input type="text" name="tutorialName" placeholder="Tutorial name...">
        <input type="text" name="courseName" placeholder="Course name...">
        <input type="text" name="password" placeholder="Room password...">
        <input type="date" name="startDate" placeholder="Set the start date...">
        <input type="date" name="endDate" placeholder="Set the end date...">
        <input type="time" name="startTime" placeholder="Start time...">
        <input type="time" name="endTime" placeholder="End time...">
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </form>
    </div>
  </div>
</template>

<template name="tutorialDetail">
  <br>
  <div class="row">
    <div class="col s12 m5 l4">
      <div class="card">
        <div class="card-image">
          <img src="/img/unsw-logo-large.jpg">
          <span class="card-title">{{tutorialName}}</span>
        </div>
        <div class="card-content">
          <dl class="row">
            <dt class="col s4"><b>Tutorial:</b></dt>
            <dd class="col s8">{{tutorialName}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>Course:</b></dt>
            <dd class="col s8">{{courseName}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>Start:</b></dt>
            <dd class="col s8">{{startDate}} {{startTime}}</dd>
          </dl>
          <dl class="row">
            <dt class="col s4"><b>End:</b></dt>
            <dd class="col s8">{{endDate}} {{endTime}}</dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="col s12 m7 l8">

    </div>
  </div>

</template>

<template name="editProfile">
  <!--Modal Structure -->
  <div id="editProfile" class="">
    <div class="modal-content">
      <h4>Edit Profile</h4>
      <form class="edit-profile-form">
        <label>zID</label>
        <input type="text" name="zid" value="{{userProfile.zid}}" placeholder="zId">
        <label>Firstname</label>
        <input type="text" name="firstname" value="{{userProfile.firstname}}" placeholder="firstname">
        <label>Lastname</label>
        <input type="text" name="lastname" value="{{userProfile.lastname}}" placeholder="lastname">
        <label>Gender</label>
        <select name="gender" style="display: block">
          <option value="male" {{compareGender 'male'}}>Male</option>
          <option value="female" {{compareGender 'female'}}>Female</option>
        </select>
        <br>
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </form>
    </div>
  </div>
</template>